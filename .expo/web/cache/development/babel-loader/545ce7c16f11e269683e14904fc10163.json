{"ast":null,"code":"var _interopRequireDefault = require(\"@babel/runtime/helpers/interopRequireDefault\");\n\nvar _interopRequireWildcard = require(\"@babel/runtime/helpers/interopRequireWildcard\");\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _extends2 = _interopRequireDefault(require(\"@babel/runtime/helpers/extends\"));\n\nvar _slicedToArray2 = _interopRequireDefault(require(\"@babel/runtime/helpers/slicedToArray\"));\n\nvar _objectWithoutProperties2 = _interopRequireDefault(require(\"@babel/runtime/helpers/objectWithoutProperties\"));\n\nvar _react = _interopRequireWildcard(require(\"react\"));\n\nvar _overlays = require(\"@react-native-aria/overlays\");\n\nvar _reactNative = require(\"react-native-web/dist/index\");\n\nvar _Backdrop = _interopRequireDefault(require(\"../Backdrop\"));\n\nvar _Transitions = require(\"../Transitions\");\n\nvar _focus = require(\"@react-native-aria/focus\");\n\nvar _hooks = require(\"../../../hooks\");\n\nvar _Context = require(\"./Context\");\n\nvar _Box = _interopRequireDefault(require(\"../../primitives/Box\"));\n\nvar _Transitions2 = require(\"../../composites/Transitions\");\n\nvar _factory = require(\"../../../factory\");\n\nvar _this = this,\n    _jsxFileName = \"/Users/adityajamuar/Sites/projects/nativebase/NativeBase/src/components/composites/Modal/Modal.tsx\";\n\nvar StyledKeyboardView = (0, _factory.Factory)(_reactNative.KeyboardAvoidingView);\n\nvar Modal = function Modal(_ref, ref) {\n  var children = _ref.children,\n      isOpen = _ref.isOpen,\n      onClose = _ref.onClose,\n      defaultIsOpen = _ref.defaultIsOpen,\n      initialFocusRef = _ref.initialFocusRef,\n      finalFocusRef = _ref.finalFocusRef,\n      avoidKeyboard = _ref.avoidKeyboard,\n      _ref$closeOnOverlayCl = _ref.closeOnOverlayClick,\n      closeOnOverlayClick = _ref$closeOnOverlayCl === void 0 ? true : _ref$closeOnOverlayCl,\n      _ref$isKeyboardDismis = _ref.isKeyboardDismissable,\n      isKeyboardDismissable = _ref$isKeyboardDismis === void 0 ? true : _ref$isKeyboardDismis,\n      _ref$overlayVisible = _ref.overlayVisible,\n      overlayVisible = _ref$overlayVisible === void 0 ? true : _ref$overlayVisible,\n      _ref$animationPreset = _ref.animationPreset,\n      animationPreset = _ref$animationPreset === void 0 ? 'fade' : _ref$animationPreset,\n      rest = (0, _objectWithoutProperties2.default)(_ref, [\"children\", \"isOpen\", \"onClose\", \"defaultIsOpen\", \"initialFocusRef\", \"finalFocusRef\", \"avoidKeyboard\", \"closeOnOverlayClick\", \"isKeyboardDismissable\", \"overlayVisible\", \"animationPreset\"]);\n\n  var _usePropsResolution = (0, _hooks.usePropsResolution)('Modal', rest),\n      contentSize = _usePropsResolution.contentSize,\n      restThemeProps = (0, _objectWithoutProperties2.default)(_usePropsResolution, [\"contentSize\"]);\n\n  var _useControllableState = (0, _hooks.useControllableState)({\n    value: isOpen,\n    defaultValue: defaultIsOpen,\n    onChange: function onChange(val) {\n      if (!val) onClose && onClose();\n    }\n  }),\n      _useControllableState2 = (0, _slicedToArray2.default)(_useControllableState, 2),\n      visible = _useControllableState2[0],\n      setVisible = _useControllableState2[1];\n\n  (0, _hooks.useKeyboardDismissable)({\n    enabled: isKeyboardDismissable && visible,\n    callback: function callback() {\n      return setVisible(false);\n    }\n  });\n  var child = avoidKeyboard ? _react.default.createElement(StyledKeyboardView, (0, _extends2.default)({\n    behavior: _reactNative.Platform.select({\n      ios: 'padding'\n    }),\n    pointerEvents: \"box-none\"\n  }, restThemeProps, {\n    ref: ref,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }), children) : _react.default.createElement(_Box.default, (0, _extends2.default)({}, restThemeProps, {\n    ref: ref,\n    pointerEvents: \"box-none\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }), children);\n  return _react.default.createElement(_overlays.OverlayContainer, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, _react.default.createElement(_Context.ModalContext.Provider, {\n    value: {\n      handleClose: function handleClose() {\n        return setVisible(false);\n      },\n      contentSize: contentSize,\n      initialFocusRef: initialFocusRef,\n      finalFocusRef: finalFocusRef\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, _react.default.createElement(_Transitions2.Fade, {\n    exitDuration: 150,\n    entryDuration: 200,\n    in: visible,\n    style: _reactNative.StyleSheet.absoluteFill,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 9\n    }\n  }, overlayVisible && _react.default.createElement(_Backdrop.default, {\n    onPress: function onPress() {\n      closeOnOverlayClick && setVisible(false);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 13\n    }\n  })), animationPreset === 'slide' ? _react.default.createElement(_Transitions.Slide, {\n    in: visible,\n    duration: 200,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_focus.FocusScope, {\n    contain: visible,\n    autoFocus: visible && !initialFocusRef,\n    restoreFocus: visible && !finalFocusRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 13\n    }\n  }, child)) : _react.default.createElement(_Transitions2.Fade, {\n    exitDuration: 100,\n    entryDuration: 200,\n    in: visible,\n    style: _reactNative.StyleSheet.absoluteFill,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 11\n    }\n  }, _react.default.createElement(_focus.FocusScope, {\n    contain: visible,\n    autoFocus: visible && !initialFocusRef,\n    restoreFocus: visible && !finalFocusRef,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 13\n    }\n  }, child))));\n};\n\nvar _default = (0, _react.memo)((0, _react.forwardRef)(Modal));\n\nexports.default = _default;","map":{"version":3,"sources":["Modal.tsx"],"names":["StyledKeyboardView","KeyboardAvoidingView","Modal","children","isOpen","onClose","defaultIsOpen","initialFocusRef","finalFocusRef","avoidKeyboard","closeOnOverlayClick","isKeyboardDismissable","overlayVisible","animationPreset","rest","contentSize","restThemeProps","visible","setVisible","value","defaultValue","onChange","enabled","callback","child","Platform","ios","handleClose","StyleSheet"],"mappings":"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","sourcesContent":["import React, { forwardRef, memo } from 'react';\nimport { OverlayContainer } from '@react-native-aria/overlays';\nimport { KeyboardAvoidingView, Platform, StyleSheet } from 'react-native';\nimport Backdrop from '../Backdrop';\nimport { Slide } from '../Transitions';\nimport { FocusScope } from '@react-native-aria/focus';\nimport {\n  useControllableState,\n  usePropsResolution,\n  useKeyboardDismissable,\n} from '../../../hooks';\nimport { ModalContext } from './Context';\nimport Box from '../../primitives/Box';\nimport type { IModalProps } from './types';\nimport { Fade } from '../../composites/Transitions';\nimport { Factory } from '../../../factory';\nconst StyledKeyboardView = Factory(KeyboardAvoidingView);\n\nconst Modal = (\n  {\n    children,\n    isOpen,\n    onClose,\n    defaultIsOpen,\n    initialFocusRef,\n    finalFocusRef,\n    avoidKeyboard,\n    closeOnOverlayClick = true,\n    isKeyboardDismissable = true,\n    overlayVisible = true,\n    //@ts-ignore - internal purpose only\n    animationPreset = 'fade',\n    ...rest\n  }: IModalProps,\n  ref: any\n) => {\n  const { contentSize, ...restThemeProps } = usePropsResolution('Modal', rest);\n\n  const [visible, setVisible] = useControllableState({\n    value: isOpen,\n    defaultValue: defaultIsOpen,\n    onChange: (val) => {\n      if (!val) onClose && onClose();\n    },\n  });\n\n  useKeyboardDismissable({\n    enabled: isKeyboardDismissable && visible,\n    callback: () => setVisible(false),\n  });\n\n  let child = avoidKeyboard ? (\n    <StyledKeyboardView\n      // Padding on android behaves weird\n      behavior={Platform.select({ ios: 'padding' })}\n      pointerEvents=\"box-none\"\n      {...restThemeProps}\n      ref={ref}\n    >\n      {children}\n    </StyledKeyboardView>\n  ) : (\n    <Box {...restThemeProps} ref={ref} pointerEvents=\"box-none\">\n      {children}\n    </Box>\n  );\n\n  return (\n    <OverlayContainer>\n      <ModalContext.Provider\n        value={{\n          handleClose: () => setVisible(false),\n          contentSize,\n          initialFocusRef,\n          finalFocusRef,\n        }}\n      >\n        <Fade\n          exitDuration={150}\n          entryDuration={200}\n          in={visible}\n          style={StyleSheet.absoluteFill}\n        >\n          {overlayVisible && (\n            <Backdrop\n              onPress={() => {\n                closeOnOverlayClick && setVisible(false);\n              }}\n            />\n          )}\n        </Fade>\n        {animationPreset === 'slide' ? (\n          <Slide in={visible} duration={200}>\n            <FocusScope\n              contain={visible}\n              autoFocus={visible && !initialFocusRef}\n              restoreFocus={visible && !finalFocusRef}\n            >\n              {child}\n            </FocusScope>\n          </Slide>\n        ) : (\n          <Fade\n            exitDuration={100}\n            entryDuration={200}\n            in={visible}\n            style={StyleSheet.absoluteFill}\n          >\n            <FocusScope\n              contain={visible}\n              autoFocus={visible && !initialFocusRef}\n              restoreFocus={visible && !finalFocusRef}\n            >\n              {child}\n            </FocusScope>\n          </Fade>\n        )}\n      </ModalContext.Provider>\n    </OverlayContainer>\n  );\n};\n\nexport default memo(forwardRef(Modal));\n"]},"metadata":{},"sourceType":"script"}