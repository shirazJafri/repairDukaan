{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"D:\\\\LogIn\\\\screens\\\\Map.jsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { Component, useState, useEffect } from 'react';\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport MapView, { PROVIDER_GOOGLE, Marker } from 'react-native-maps';\nimport Constants from 'expo-constants';\nimport * as Location from 'expo-location';\nimport Geocoder from 'react-native-geocoding';\nimport * as Permissions from 'expo-permissions';\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\nvar KEY = \"WlOfHKQSbaBfAafAodbzvfccj8QYGLtK\";\nvar user_id = \"602d9002022d673150ce8a28\";\nvar repair_type = \"Car\";\nimport axios from 'axios';\nimport Tracker from \"./Tracker\";\nimport { LogBox } from \"react-native-web/dist/index\";\nimport { connect } from 'react-redux';\nLogBox.ignoreLogs(['Non-serializable values were found in the navigation state', 'Require cycles are allowed, but can result in uninitialized values. Consider refactoring to remove the need for a cycle.']);\n\nvar Delivery = function Delivery(_ref) {\n  var navigation = _ref.navigation,\n      userState = _ref.userState;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      location = _useState2[0],\n      setLocation = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      errorMsg = _useState4[0],\n      setErrorMsg = _useState4[1];\n\n  var _useState5 = useState(false),\n      _useState6 = _slicedToArray(_useState5, 2),\n      log = _useState6[0],\n      setlog = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      data = _useState8[0],\n      setData = _useState8[1];\n\n  var _useState9 = useState({\n    latitude: 0,\n    longitude: 0,\n    latitudeDelta: 0.025,\n    longitudeDelta: 0.025\n  }),\n      _useState10 = _slicedToArray(_useState9, 2),\n      region = _useState10[0],\n      setRegion = _useState10[1];\n\n  var handleSubmit = function handleSubmit() {\n    axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit', {\n      user_id: userState.userInfo.id,\n      location: {\n        latitude: region.latitude,\n        longitude: region.longitude\n      },\n      repair_type: repair_type\n    }).then(function (res) {\n      if (res.data.status == \"Sorry No worker Available\") {\n        Alert.alert(\"No worker Available\");\n      } else {\n        console.log(res.data);\n        var startDate = new Date();\n        setData(res.data.details.id);\n        navigation.navigate('Tracker', {\n          data: res.data.details.id,\n          start: startDate,\n          worker_id: res.data.details.worker_id\n        });\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  var getaddress = function getaddress(lat, lng) {\n    var addressComponent;\n    return _regeneratorRuntime.async(function getaddress$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return _regeneratorRuntime.awrap(axios.get(\"http://www.mapquestapi.com/geocoding/v1/reverse?key=\" + KEY + \"&location=\" + lat + \",\" + lng + \"&includeRoadMetadata=true&includeNearestIntersection=true\", {\n              headers: {\n                \"Content-type\": \"application/json\"\n              }\n            }).then(function (response) {}));\n\n          case 2:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, null, null, Promise);\n  };\n\n  useEffect(function () {\n    (function _callee() {\n      var _await$Location$reque, status, location;\n\n      return _regeneratorRuntime.async(function _callee$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              _context2.next = 2;\n              return _regeneratorRuntime.awrap(Location.requestPermissionsAsync());\n\n            case 2:\n              _await$Location$reque = _context2.sent;\n              status = _await$Location$reque.status;\n\n              if (!(status !== 'granted')) {\n                _context2.next = 7;\n                break;\n              }\n\n              setErrorMsg('Permission to access location was denied');\n              return _context2.abrupt(\"return\");\n\n            case 7:\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(Location.getCurrentPositionAsync({}));\n\n            case 9:\n              location = _context2.sent;\n              setLocation(location);\n              setRegion(_objectSpread(_objectSpread({}, region), {}, {\n                longitude: location.coords.longitude,\n                latitude: location.coords.latitude\n              }));\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    })();\n  }, []);\n  var text = 'Waiting..';\n\n  if (errorMsg) {\n    text = errorMsg;\n  } else if (location) {\n    text = JSON.stringify(location);\n    return React.createElement(View, {\n      style: {\n        flex: 1,\n        marginBottom: 0\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 7\n      }\n    }, React.createElement(MapView, {\n      style: {\n        flex: 1\n      },\n      showsUserLocation: true,\n      showsMyLocationButton: true,\n      onRegionChangeComplete: setRegion,\n      initialRegion: region,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }\n    }), React.createElement(View, {\n      style: {\n        top: '50%',\n        left: '50%',\n        marginLeft: -24,\n        marginTop: -48,\n        position: 'absolute'\n      },\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 3\n      }\n    }, React.createElement(Image, {\n      style: {\n        width: 24,\n        height: 24\n      },\n      source: require(\"../assets/marker.png\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 5\n      }\n    })), React.createElement(View, {\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 3\n      }\n    }, React.createElement(TouchableOpacity, {\n      style: styles.subtn,\n      onPress: handleSubmit,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 3\n      }\n    }, React.createElement(Text, {\n      style: styles.buttonTextStyle,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 68\n      }\n    }, \"Submit\"))));\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 5\n    }\n  }, React.createElement(Text, {\n    style: styles.paragraph,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }\n  }, text));\n};\n\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    alignItems: 'center',\n    justifyContent: 'center',\n    paddingTop: Constants.statusBarHeight,\n    backgroundColor: '#ecf0f1'\n  },\n  paragraph: {\n    margin: 24,\n    fontSize: 18,\n    textAlign: 'center'\n  },\n  buttonTextStyle: {\n    color: '#FFFFFF',\n    paddingVertical: 10,\n    fontSize: 20\n  },\n  subtn: {\n    backgroundColor: \"#fb5b5a\",\n    borderRadius: 25,\n    height: 50,\n    alignItems: \"center\",\n    justifyContent: \"center\"\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    userState: state.user\n  };\n};\n\nexport default connect(mapStateToProps, null);","map":{"version":3,"sources":["D:/LogIn/screens/Map.jsx"],"names":["React","Component","useState","useEffect","MapView","PROVIDER_GOOGLE","Marker","Constants","Location","Geocoder","Permissions","MaterialCommunityIcons","KEY","user_id","repair_type","axios","Tracker","LogBox","connect","ignoreLogs","Delivery","navigation","userState","location","setLocation","errorMsg","setErrorMsg","log","setlog","data","setData","latitude","longitude","latitudeDelta","longitudeDelta","region","setRegion","handleSubmit","post","userInfo","id","then","res","status","Alert","alert","console","startDate","Date","details","navigate","start","worker_id","catch","err","getaddress","lat","lng","get","headers","response","requestPermissionsAsync","getCurrentPositionAsync","coords","text","JSON","stringify","flex","marginBottom","top","left","marginLeft","marginTop","position","width","height","require","styles","subtn","buttonTextStyle","container","paragraph","StyleSheet","create","alignItems","justifyContent","paddingTop","statusBarHeight","backgroundColor","margin","fontSize","textAlign","color","paddingVertical","borderRadius","mapStateToProps","state","user"],"mappings":"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","sourcesContent":["import React,{Component,useState,useEffect} from 'react'\r\nimport {Platform,SafeAreaView,View,TextInput,Text, StyleSheet,Image,Alert, TouchableOpacity} from 'react-native'\r\nimport MapView, {PROVIDER_GOOGLE, Marker} from 'react-native-maps';\r\nimport  Constants from 'expo-constants';\r\nimport * as Location from 'expo-location';\r\nimport Geocoder from 'react-native-geocoding'\r\nimport * as Permissions from 'expo-permissions';\r\nimport { MaterialCommunityIcons } from '@expo/vector-icons';\r\nconst KEY = \"WlOfHKQSbaBfAafAodbzvfccj8QYGLtK\"\r\nconst user_id = \"602d9002022d673150ce8a28\"\r\nconst repair_type = \"Car\"\r\nimport axios from 'axios'\r\nimport Tracker from './Tracker';\r\nimport { LogBox } from 'react-native';\r\nimport { connect } from 'react-redux';\r\nLogBox.ignoreLogs([\r\n  'Non-serializable values were found in the navigation state',\r\n  'Require cycles are allowed, but can result in uninitialized values. Consider refactoring to remove the need for a cycle.'\r\n]);\r\nconst Delivery = ({navigation, userState}) =>{\r\n  const [location, setLocation] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n  const [log,setlog] = useState(false);\r\n  const [data,setData] = useState(null);\r\n const[ region ,setRegion] =useState({\r\n    latitude: 0,\r\n    longitude: 0,\r\n    latitudeDelta: 0.025,\r\n    longitudeDelta: 0.025\r\n})\r\nconst handleSubmit = () =>{\r\n  //let adr = getaddress(region.latitude,region.longitude)\r\n  axios.post('https://enigmatic-mesa-42065.herokuapp.com/user/submit',{user_id: userState.userInfo.id,location:{latitude:region.latitude,longitude:region.longitude},repair_type}).then((res) => {\r\n      if(res.data.status == \"Sorry No worker Available\"){\r\n        Alert.alert(\"No worker Available\")\r\n      }\r\n      else{\r\n        console.log(res.data)\r\n        var startDate = new Date();\r\n      setData(res.data.details.id)\r\n      navigation.navigate('Tracker',{data:res.data.details.id,start:startDate,worker_id:res.data.details.worker_id})\r\n    }\r\n  }).catch((err) => {\r\n    console.log(err);\r\n  })\r\n}\r\nconst getaddress = async (lat,lng) =>{\r\n  var addressComponent\r\n    await axios.get( \r\n     \"http://www.mapquestapi.com/geocoding/v1/reverse?key=\"+KEY+\"&location=\"+lat+\",\"+lng+\"&includeRoadMetadata=true&includeNearestIntersection=true\",\r\n      {\r\n        headers: {\r\n          \"Content-type\": \"application/json\"\r\n        }\r\n      }\r\n    ).then(\r\n      (response) => {\r\n       // console.log(response.data)\r\n      }\r\n    )\r\n   }\r\n  useEffect(() => {\r\n    (async () => {\r\n      let { status } = await Location.requestPermissionsAsync();\r\n      if (status !== 'granted') {\r\n        setErrorMsg('Permission to access location was denied');\r\n        return;\r\n      }\r\n      let location = await Location.getCurrentPositionAsync({});\r\n      setLocation(location);\r\n      setRegion({...region,longitude:location.coords.longitude,latitude:location.coords.latitude})\r\n    })();\r\n  }, []);\r\n\r\n  let text = 'Waiting..';\r\n  if (errorMsg) {\r\n    text = errorMsg;\r\n  } \r\n  else if (location) {\r\n    text = JSON.stringify(location);\r\n    return(\r\n      <View style ={{flex:1, marginBottom:0}}>\r\n    <MapView\r\n    style={{ flex: 1 }}\r\n    showsUserLocation = {true}\r\n    showsMyLocationButton = {true}\r\n    onRegionChangeComplete = {setRegion}\r\n    initialRegion={region}\r\n  />\r\n  <View style = {{top:'50%', left:'50%', marginLeft:-24,marginTop:-48,position:'absolute'}}>\r\n    <Image style = {{width:24,height:24}} source = {require('../assets/marker.png')}></Image>\r\n  </View>\r\n  <View>\r\n  <TouchableOpacity style={styles.subtn} onPress = {handleSubmit} ><Text style = {styles.buttonTextStyle}>Submit</Text></TouchableOpacity>\r\n  </View>\r\n  </View>\r\n  );\r\n  }\r\n  return (\r\n    <View style={styles.container}>\r\n      <Text style={styles.paragraph}>{text}</Text>\r\n    </View>);\r\n}\r\n  const styles = StyleSheet.create({\r\n    container: {\r\n      flex: 1,\r\n      alignItems: 'center',\r\n      justifyContent: 'center',\r\n      paddingTop: Constants.statusBarHeight,\r\n      backgroundColor: '#ecf0f1'\r\n    },\r\n    paragraph: {\r\n      margin: 24,\r\n      fontSize: 18,\r\n      textAlign: 'center'\r\n    },\r\n    buttonTextStyle: {\r\n      color: '#FFFFFF',\r\n      paddingVertical: 10,\r\n      fontSize: 20,\r\n    },\r\n    subtn:{\r\n      backgroundColor:\"#fb5b5a\",\r\n      borderRadius:25,\r\n      height:50,\r\n      alignItems:\"center\",\r\n      justifyContent:\"center\",\r\n    }\r\n  });\r\n\r\n  const mapStateToProps = state => {\r\n    return {\r\n      userState: state.user\r\n    }\r\n  }\r\n\r\n  export default connect(mapStateToProps, null); \r\n"]},"metadata":{},"sourceType":"module"}